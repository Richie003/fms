{%extends 'base.html' %}
{%load static%}
{%load myfilter%}
{%block meta_tags%}
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="{{request.user}}">
    <meta name="generator" content="Jekyll v4.1.1">
    <style type="text/css">
        body{margin-top:20px;
    background-color: #f1f3f7;
    }
    .search-box .form-control {
    border-radius: 10px;
    padding-left: 40px
    }
    
    .search-box .search-icon {
    position: absolute;
    left: 13px;
    top: 50%;
    -webkit-transform: translateY(-50%);
    transform: translateY(-50%);
    fill: #545965;
    width: 16px;
    height: 16px
    }
    .card {
    margin-bottom: 24px;
    -webkit-box-shadow: 0 2px 3px #e4e8f0;
    box-shadow: 0 2px 3px #e4e8f0;
    }
    .card {
    position: relative;
    display: -webkit-box;
    display: -ms-flexbox;
    display: flex;
    -webkit-box-orient: vertical;
    -webkit-box-direction: normal;
    -ms-flex-direction: column;
    flex-direction: column;
    min-width: 0;
    word-wrap: break-word;
    background-color: #fff;
    background-clip: border-box;
    border: 1px solid #eff0f2;
    border-radius: 1rem;
    }
    .me-3 {
    margin-right: 1rem!important;
    }
    
    .font-size-24 {
    font-size: 24px!important;
    }
    .avatar-title {
    -webkit-box-align: center;
    -ms-flex-align: center;
    align-items: center;
    background-color: #3b76e1;
    color: #fff;
    display: -webkit-box;
    display: -ms-flexbox;
    display: flex;
    font-weight: 500;
    height: 100%;
    -webkit-box-pack: center;
    -ms-flex-pack: center;
    justify-content: center;
    width: 100%;
    }
    
    .bg-soft-info {
    background-color: rgba(87,201,235,.25)!important;
    }
    
    .bg-soft-primary {
    background-color: rgba(59,118,225,.25)!important;
    }
    
    .avatar-xs {
    height: 1rem;
    width: 1rem
    }
    
    .avatar-sm {
    height: 2rem;
    width: 2rem
    }
    
    .avatar {
    height: 3rem;
    width: 3rem
    }
    
    .avatar-md {
    height: 4rem;
    width: 4rem
    }
    
    .avatar-lg {
    height: 5rem;
    width: 5rem
    }
    
    .avatar-xl {
    height: 6rem;
    width: 6rem
    }
    
    .avatar-title {
    -webkit-box-align: center;
    -ms-flex-align: center;
    align-items: center;
    background-color: #3b76e1;
    color: #fff;
    display: -webkit-box;
    display: -ms-flexbox;
    display: flex;
    font-weight: 500;
    height: 100%;
    -webkit-box-pack: center;
    -ms-flex-pack: center;
    justify-content: center;
    width: 100%
    }
    
    .avatar-group {
    display: -webkit-box;
    display: -ms-flexbox;
    display: flex;
    -ms-flex-wrap: wrap;
    flex-wrap: wrap;
    padding-left: 8px
    }
    
    .avatar-group .avatar-group-item {
    margin-left: -8px;
    border: 2px solid #fff;
    border-radius: 50%;
    -webkit-transition: all .2s;
    transition: all .2s
    }
    
    .avatar-group .avatar-group-item:hover {
    position: relative;
    -webkit-transform: translateY(-2px);
    transform: translateY(-2px)
    }
    
    .fw-medium {
    font-weight: 500;
    }
    
    a {
    text-decoration: none!important;
    }
    </style>
{%endblock%}
{%block sub_folders%}
<div class="row mt-4" id="sub-folder-container">
{%for folder in subfolders%}    
    <div class="col-xl-4 col-sm-6">
    <div class="card shadow-none border">
    <div class="card-body p-3">
    <div class="">
    <div class="d-flex justify-content-between align-items-center">
    <div>
    <i class="bx bxs-folder h1 mb-0 text-warning"></i>
    </div>
    <div class="avatar-group">
    <div class="avatar-group-item">
    <a href="javascript: void(0);" class="d-inline-block">
    <div class="avatar-sm">
    <span class="avatar-title rounded-circle bg-info text-white font-size-16">
    Y
    </span>
    </div>
    </a>
    </div>
    <div class="avatar-group-item">
        <a href="javascript: void(0);" class="d-inline-block">
        <div class="avatar-sm">
        <span class="avatar-title rounded-circle bg-info text-white font-size-16">
        O
        </span>
        </div>
        </a>
        </div>
        <div class="avatar-group-item">
            <a href="javascript: void(0);" class="d-inline-block">
            <div class="avatar-sm">
            <span class="avatar-title rounded-circle bg-info text-white font-size-16">
            U
            </span>
            </div>
            </a>
            </div>
    </div>
    </div>
    <div class="d-flex justify-content-between mt-3">
    <div class="overflow-hidden me-auto">
    <h5 class="font-size-15 text-truncate mb-1"><a href="javascript: void(0);" class="text-body">{{folder.folder}}</a></h5>
    <p class="text-muted text-truncate mb-0">20 Files</p>
    </div>
    <div class="align-self-end">
    <p class="text-muted mb-0 font-size-13"><i class="mdi mdi-clock"></i>{{folder.created|date:"SHORT_DATE_FORMAT"}}</p>
    </div>
    </div>
    </div>
    </div>
    </div>
    </div>
{%endfor%}
    </div>
{%endblock%}
    {%block content%}
    <div class="my-3 p-3 bg-white rounded shadow-sm">
        <div class="border-bottom border-gray pb-2 mb-0 d-flex justify-content-between align-items-center">
            <div class="d-flex align-items-center">
                {%if request.user%}{{user|capfirst}}{%endif%} Files
                <span class="primary-bg mx-1 rounded fw-bold" id="cart"
                    style="border:1px solid; width: 30px; text-align:center; color:#fff;">{{file_count}}</span>
            </div>
            <div>
            <svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" class="" viewBox="0 0 512 512" onclick="userFileOptions(this)">
                <path d="M328 256c0 39.8-32.2 72-72 72s-72-32.2-72-72 32.2-72 72-72 72 32.2 72 72zm104-72c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72zm-352 0c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72z" fill="#000"/>
            </svg>
            <div class="primary-bg px-3 py-2 d-none" id="Fileoption-dropdown" style="position: absolute; transform: translate3d(-41px, 123px, 0px); top: 0px; right: 0px; will-change: transform; z-index: 3; border-radius: 43px 1px 24px 25px;">
                <div class="dropdown-header text-white" style="cursor: text">Options For You:</div>
                <div class="dropdown-divider"></div>
                <a class="dropdown-item d-flex justify-content-between align-items-center text-dark" onclick="selectOption(this)">Select all</a>
                <div class="dropdown-divider"></div>
                <form action="{%url 'delete_all' %}" method="POST" class="delete_all_form" id="delete-id">
                    {%csrf_token%}
                    <button class="btn btn-sm bg-danger mx-5 text-white d-none" id="delete-all">
                        <span class="d-flex align-items-center">
                            Delete
                            <div class="border-left h-100">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="15" viewBox="0 0 448 512">
                                    <path d="M268 416h24a12 12 0 0 0 12-12V188a12 12 0 0 0-12-12h-24a12 12 0 0 0-12 12v216a12 12 0 0 0 12 12zM432 80h-82.41l-34-56.7A48 48 0 0 0 274.41 0H173.59a48 48 0 0 0-41.16 23.3L98.41 80H16A16 16 0 0 0 0 96v16a16 16 0 0 0 16 16h16v336a48 48 0 0 0 48 48h288a48 48 0 0 0 48-48V128h16a16 16 0 0 0 16-16V96a16 16 0 0 0-16-16zM171.84 50.91A6 6 0 0 1 177 48h94a6 6 0 0 1 5.15 2.91L293.61 80H154.39zM368 464H80V128h288zm-212-48h24a12 12 0 0 0 12-12V188a12 12 0 0 0-12-12h-24a12 12 0 0 0-12 12v216a12 12 0 0 0 12 12z" fill="#fff"/>
                                </svg>
                            </div>
                        </span>
                        </button>
                </form>
            </div>
            </div>
        </div>
        <span class="d-none" id="folder_name">{{name}}</span>
        <div class="" id="initial-container">
            {%for items in folder_items%}
            <div class="media text-muted pt-3">
                <div class="media-body pb-3 mb-0 small lh-125 border-bottom border-gray">
                    <div class="d-flex justify-content-between align-items-center w-100">
                        <div class="w-50" id="fileN-box">
                            <input type="checkbox" name="checked-file" value="{{items.pk}}" id="checked_all" class="d-none selector" checked>
                            <span class="filename text-gray-dark font-weight-bolder" ondblclick="renameFile(this)">{{items.original_filename}}</span>
                        </div>
                        <!-- <strong class="filename text-gray-dark">{{data.folder|get_objects}}</strong> -->
                        <div class="">
                        <button class="btn btn-sm btn-light px-2 flex-shrink-0 get_folder" type="button" onclick="removeFile(`/delete/file/{{items.convertId}}/`, `{{request.path}}`)">
                            <svg xmlns="http://www.w3.org/2000/svg" height="20" width="15" viewBox="0 0 448 512">
                                <path d="M268 416h24a12 12 0 0 0 12-12V188a12 12 0 0 0-12-12h-24a12
                                12 0 0 0-12 12v216a12 12 0 0 0 12 12zM432
                                80h-82.41l-34-56.7A48 48 0 0 0 274.41 0H173.59a48 48 0 0 0-41.16 23.3L98.41 80H16A16 16 0 0 0 0 96v16a16 16 0 0 0 16 16h16v336a48 48 0 0 0 48
                                48h288a48 48 0 0 0 48-48V128h16a16 16 0 0 0 16-16V96a16 16 0 0 0-16-16zM171.84 50.91A6 6 0 0 1 177 48h94a6 6 0 0 1 5.15 2.91L293.61 80H154.39zM368 464H80V128h288zm-212-48h24a12 12 0 0 0 12-12V188a12 12 0 0 0-12-12h-24a12 12 0 0 0-12 12v216a12 12 0 0 0 12 12z" fill="#ff0000"/>
                            </svg>
                        </button>
                        <a class="btn btn-sm btn-light buttss" href="{%url 'download_file' items.original_filename items.associate_folder%}" id="new_file" type="button">
                            <svg xmlns="http://www.w3.org/2000/svg" height="20" width="15" viewBox="0 0 512 512">
                                <path d="M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z" fill="#00e7ff"/>
                            </svg>
                        </a>
                        <a class="btn btn-sm btn-light" data-url="{%url 'gen_link' %}" data-fileID="{{items.id}}" id="liveToastBtn" onclick="shareFile(this)" >
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-link-45deg" viewBox="0 0 16 16">
                                <path d="M4.715 6.542 3.343 7.914a3 3 0 1 0 4.243 4.243l1.828-1.829A3 3 0 0 0 8.586 5.5L8 6.086a1.002 1.002 0 0 0-.154.199 2 2 0 0 1 .861 3.337L6.88 11.45a2 2 0 1 1-2.83-2.83l.793-.792a4.018 4.018 0 0 1-.128-1.287z"/>
                                <path d="M6.586 4.672A3 3 0 0 0 7.414 9.5l.775-.776a2 2 0 0 1-.896-3.346L9.12 3.55a2 2 0 1 1 2.83 2.83l-.793.792c.112.42.155.855.128 1.287l1.372-1.372a3 3 0 1 0-4.243-4.243L6.586 4.672z"/>
                            </svg>
                        </a>
                        </div>
                    </div>
                    <div class="d-flex align-items-center justify-content-between">
                        <span>Uploaded~{{items.created|date:'D d M Y'}}</span>
                        <span>{{items.approx_filesize}}</span>
                    </div>
                </div>
            </div>
            {%endfor%}
            {% comment %} Search item(s) container {% endcomment %}
            <!-- {%for dt in data2%}
            <p class="text-muted"><a href="{{dt.file.url}}" class="text-decoration-none">{{dt.file}}</a></p>
            {%endfor%} -->
            <small class="d-block text-right mt-3">
                <a href="#" style="color:#17a2b8;">All Files <i class="bi bi-layers"></i></a>
            </small>
    
        </div>
        <div class="d-none" id="result-container">
            
        </div>
    {%endblock%}
{%block scripts%}
<script src="{% static 'js/file_func.js' %}"></script>
<script>
    $(document).ready(()=>{
        $('.anon').val(`{{name}}`)
    })
    const renameFile = () => {
        $(this.event.target).attr('contenteditable', true);
    }


</script>
{%endblock%}

